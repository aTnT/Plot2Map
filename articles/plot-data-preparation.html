<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Plot data preparation • Plot2Map</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot data preparation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Plot2Map</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/plot-data-preparation.html">Plot data preparation</a></li>
    <li><a class="dropdown-item" href="../articles/bias-modeling.html">Bias Modeling and Correction for AGB Maps</a></li>
    <li><a class="dropdown-item" href="../articles/als-lidar-validation.html">Validating AGB Maps with Airborne LiDAR Data</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-uncertainty.html">Advanced Uncertainty Quantification with Spatial Correlation</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot data preparation</h1>
            
      

      <div class="d-none name"><code>plot-data-preparation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this page we showcase the different user data formats of plot
estimates of AGB, here refereed as plot data, possible to be used in the
Plot2Map workflow.</p>
</div>
<div class="section level2">
<h2 id="plot-data-formats">Plot data formats<a class="anchor" aria-label="anchor" href="#plot-data-formats"></a>
</h2>
<div class="section level3">
<h3 id="point-data-formatted-dataframe">Point data formatted dataframe<a class="anchor" aria-label="anchor" href="#point-data-formatted-dataframe"></a>
</h3>
<p>In this case there is already an AGB estimate from the user. This
format is exemplified with the sample plots dataframe available with the
package accessible with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plots</span><span class="op">)</span> </span></code></pre></div>
<p>This format correspond to a dataframe containing sample plots with an
unique plot ID, longitude and latitude point data, an estimated Above
Ground Biomass in t/ha, average year of inventory, and plot size in
ha.</p>
</div>
<div class="section level3">
<h3 id="point-data-unformatted-dataframe">Point data unformatted dataframe<a class="anchor" aria-label="anchor" href="#point-data-unformatted-dataframe"></a>
</h3>
<p>In this case there is also a dataframe in a similar format to the
previous case, but with unformatted data over which the user will be
asked about the specific column index of required plot variables such as
unique plot ID, longitude, latitude, AGB of the plot, plot size,
inventory year. This can be exemplified below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">unformatted_plots</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="../reference/sample_file.html">sample_file</a></span><span class="op">(</span><span class="st">"SampleUnformattedPlots.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">unformatted_plots</span><span class="op">)</span></span>
<span><span class="co">#      Provincia                          Estrato.Florestal id_parcela Ycoordinate Xcoordinate Vt..m.3.ha.</span></span>
<span><span class="co"># 1 Cabo Delgado Floresta (semi-) decidua, incluindo Miombo  CD0772003   -10.60656    40.53664       39.90</span></span>
<span><span class="co"># 2 Cabo Delgado Floresta (semi-) decidua, incluindo Miombo  CD0772002   -10.60657    40.53572       24.65</span></span>
<span><span class="co"># 3 Cabo Delgado Floresta (semi-) decidua, incluindo Miombo  CD0770543   -10.60666    40.52744        4.09</span></span>
<span><span class="co"># 4 Cabo Delgado Floresta (semi-) decidua, incluindo Miombo  CD0770542   -10.60667    40.52652       20.06</span></span>
<span><span class="co"># 5 Cabo Delgado Floresta (semi-) decidua, incluindo Miombo  CD0772004   -10.60747    40.53664        0.00</span></span>
<span><span class="co"># 6 Cabo Delgado Floresta (semi-) decidua, incluindo Miombo  CD0772001   -10.60747    40.53573       64.15</span></span>
<span><span class="co">#   Vc..m.3.ha. AGB..ton.ha. BGB..ton.ha. year size</span></span>
<span><span class="co"># 1        2.53        32.61        21.73 2016  0.1</span></span>
<span><span class="co"># 2        0.77        21.44        13.32 2016  0.1</span></span>
<span><span class="co"># 3        0.00         4.41         2.96 2016  0.1</span></span>
<span><span class="co"># 4        2.38        17.77        10.56 2016  0.1</span></span>
<span><span class="co"># 5        0.00         0.00         0.00 2016  0.1</span></span>
<span><span class="co"># 6        0.97        77.74        27.38 2016  0.1</span></span></code></pre></div>
<p>The following step will request the user to select the requested
columns:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">formatted_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RawPlots.html">RawPlots</a></span><span class="op">(</span><span class="va">unformatted_plots</span><span class="op">)</span></span>
<span><span class="co"># Which column is your unique Plot ID? </span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  1: Manual entry        2: Provincia           3: Estrato.Florestal</span></span>
<span><span class="co">#  4: id_parcela          5: Ycoordinate         6: Xcoordinate      </span></span>
<span><span class="co">#  7: Vt..m.3.ha.         8: Vc..m.3.ha.         9: AGB..ton.ha.     </span></span>
<span><span class="co"># 10: BGB..ton.ha.       11: year               12: size             </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 4</span></span>
<span><span class="co"># Which column is your plot AGB? </span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  1: Manual entry        2: Provincia           3: Estrato.Florestal</span></span>
<span><span class="co">#  4: id_parcela          5: Ycoordinate         6: Xcoordinate      </span></span>
<span><span class="co">#  7: Vt..m.3.ha.         8: Vc..m.3.ha.         9: AGB..ton.ha.     </span></span>
<span><span class="co"># 10: BGB..ton.ha.       11: year               12: size             </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 9</span></span>
<span><span class="co"># Select longitude column </span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  1: Manual entry        2: Provincia           3: Estrato.Florestal</span></span>
<span><span class="co">#  4: id_parcela          5: Ycoordinate         6: Xcoordinate      </span></span>
<span><span class="co">#  7: Vt..m.3.ha.         8: Vc..m.3.ha.         9: AGB..ton.ha.     </span></span>
<span><span class="co"># 10: BGB..ton.ha.       11: year               12: size             </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 6</span></span>
<span><span class="co"># Which column is your latitude? </span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  1: Manual entry        2: Provincia           3: Estrato.Florestal</span></span>
<span><span class="co">#  4: id_parcela          5: Ycoordinate         6: Xcoordinate      </span></span>
<span><span class="co">#  7: Vt..m.3.ha.         8: Vc..m.3.ha.         9: AGB..ton.ha.     </span></span>
<span><span class="co"># 10: BGB..ton.ha.       11: year               12: size             </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 5</span></span>
<span><span class="co"># Select plot size column </span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  1: Manual entry        2: Provincia           3: Estrato.Florestal</span></span>
<span><span class="co">#  4: id_parcela          5: Ycoordinate         6: Xcoordinate      </span></span>
<span><span class="co">#  7: Vt..m.3.ha.         8: Vc..m.3.ha.         9: AGB..ton.ha.     </span></span>
<span><span class="co"># 10: BGB..ton.ha.       11: year               12: size             </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 12</span></span>
<span><span class="co"># Select year column </span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  1: Manual entry        2: Provincia           3: Estrato.Florestal</span></span>
<span><span class="co">#  4: id_parcela          5: Ycoordinate         6: Xcoordinate      </span></span>
<span><span class="co">#  7: Vt..m.3.ha.         8: Vc..m.3.ha.         9: AGB..ton.ha.     </span></span>
<span><span class="co"># 10: BGB..ton.ha.       11: year               12: size             </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 11</span></span></code></pre></div>
<p>Note how after user input we get a similar data format to the
previous section:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">formatted_plots</span><span class="op">)</span></span>
<span><span class="co">#      PLOT_ID  POINT_X   POINT_Y AGB_T_HA SIZE_HA FEZ GEZ AVG_YEAR</span></span>
<span><span class="co"># 3267      21 32.35752 -26.54318    54.13     0.1  NA  NA     2016</span></span>
<span><span class="co"># 3268      24 32.35853 -26.54318    13.90     0.1  NA  NA     2016</span></span>
<span><span class="co"># 3269      12 32.75884 -26.65187    92.66     0.1  NA  NA     2016</span></span>
<span><span class="co"># 3270      13 32.75984 -26.65187   112.87     0.1  NA  NA     2016</span></span>
<span><span class="co"># 3271      11 32.75884 -26.65277    56.08     0.1  NA  NA     2016</span></span>
<span><span class="co"># 3272      14 32.75984 -26.65277    65.59     0.1  NA  NA     2016</span></span></code></pre></div>
<p>This format correspond to a dataframe containing sample plots with an
ID, longitude and latitude point data, an estimated Above Ground Biomass
in t/ha, average year of plot survey, and plot size in ha.</p>
</div>
<div class="section level3">
<h3 id="plot-corner-coordinates">Plot corner coordinates<a class="anchor" aria-label="anchor" href="#plot-corner-coordinates"></a>
</h3>
<p>This is the plot data format found in <a href="https://doi.org/10.1109/JSTARS.2018.2851606" class="external-link">Labriere et
al. 2018</a> sample data. It contains the corner coordinates of a
bounding box defining each plot:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">plots_corners</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="../reference/sample_file.html">sample_file</a></span><span class="op">(</span><span class="st">"PolyTropiSAR.csv"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Labriere et al. 2018 plots sample data</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plots_corners</span><span class="op">)</span></span>
<span><span class="co">#     id  POINT_X  POINT_Y  X</span></span>
<span><span class="co"># 1 NOU01 312514.3 449724.3 NA</span></span>
<span><span class="co"># 2 NOU01 312517.6 449824.2 NA</span></span>
<span><span class="co"># 3 NOU02 313704.3 451320.5 NA</span></span>
<span><span class="co"># 4 NOU02 313752.2 451408.3 NA</span></span>
<span><span class="co"># 5 NOU02 313800.0 451496.1 NA</span></span>
<span><span class="co"># 6 NOU02 313847.9 451583.9 NA</span></span>
<span></span>
<span><span class="va">plots_AGB</span> <span class="op">&lt;-</span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="../reference/sample_file.html">sample_file</a></span><span class="op">(</span><span class="st">"PolyTropiAGB.csv"</span><span class="op">)</span><span class="op">)</span> <span class="co"># plot-level AGB</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plots_AGB</span><span class="op">)</span></span>
<span><span class="co">#   PLOT_ID AVG_YEAR AGB_T_HA</span></span>
<span><span class="co"># 1   NOU01     2010   431.90</span></span>
<span><span class="co"># 2   NOU02     2010   368.41</span></span>
<span><span class="co"># 3   NOU03     2010   525.65</span></span>
<span><span class="co"># 4   NOU04     2010   429.87</span></span>
<span><span class="co"># 5   NOU05     2010   234.60</span></span>
<span><span class="co"># 6   NOU06     2010   288.10</span></span>
<span></span>
<span><span class="va">SRS</span> <span class="op">&lt;-</span> <span class="fl">32622</span> <span class="co"># plot data source spatial reference system</span></span>
<span></span>
<span><span class="va">plots_corners_AGB</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Polygonize.html">Polygonize</a></span><span class="op">(</span><span class="va">plots_corners</span>, <span class="va">SRS</span><span class="op">)</span></span>
<span><span class="co"># Converting coordinates from source SRS (32622) to EPSG:4326 / WGS84</span></span>
<span><span class="va">plots_corners_AGB</span><span class="op">$</span><span class="va">AGB_T_HA</span> <span class="op">&lt;-</span> <span class="va">plots_AGB</span><span class="op">$</span><span class="va">AGB_T_HA</span></span>
<span><span class="va">plots_corners_AGB</span><span class="op">$</span><span class="va">AVG_YEAR</span> <span class="op">&lt;-</span> <span class="va">plots_AGB</span><span class="op">$</span><span class="va">AVG_YEAR</span></span>
<span> </span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plots_corners_AGB</span><span class="op">)</span></span>
<span><span class="co">#       ID PLOT_ID         SIZE_HA   POINT_X  POINT_Y AGB_T_HA AVG_YEAR</span></span>
<span><span class="co"># NOU01  1   NOU01  2.0000014 [ha] -52.68839 4.067844   431.90     2010</span></span>
<span><span class="co"># NOU02  1   NOU02 10.0000058 [ha] -52.67643 4.085602   368.41     2010</span></span>
<span><span class="co"># NOU03  1   NOU03  6.0000008 [ha] -52.68235 4.039235   525.65     2010</span></span>
<span><span class="co"># NOU04  1   NOU04 12.0000037 [ha] -52.68352 4.082891   429.87     2010</span></span>
<span><span class="co"># NOU05  1   NOU05  0.2499999 [ha] -52.67710 4.041068   234.60     2010</span></span>
<span><span class="co"># NOU06  1   NOU06  0.2499998 [ha] -52.67789 4.039038   288.10     2010</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plot-data-contains-tree-level-measurements">Plot data contains tree-level measurements<a class="anchor" aria-label="anchor" href="#plot-data-contains-tree-level-measurements"></a>
</h3>
<p>This format of plot data contains tree-level allometric measurements
that will be used to estimate mean AGB and standard deviation by plot
ID, using <a href="https://umr-amap.github.io/BIOMASS/" class="external-link">BIOMASS</a>
package’s height-diameter model:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Formatted data example</span></span>
<span><span class="va">plotsTree</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="../reference/sample_file.html">sample_file</a></span><span class="op">(</span><span class="st">"SampleTree.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plotsTree</span><span class="op">)</span></span>
<span><span class="co">#     id      genus    species  diameter  size                 fez      gez year</span></span>
<span><span class="co"># 1 BSP1 Terminalia  bellirica  3.501409 10000 tropical rainforest tropical 1996</span></span>
<span><span class="co"># 2 BSP1   Ziziphus   oenoplia  3.819719 10000 tropical rainforest tropical 1996</span></span>
<span><span class="co"># 3 BSP1    Aporosa lindleyana 16.870424 10000 tropical rainforest tropical 1996</span></span>
<span><span class="co"># 4 BSP1      Ixora  brachiata  4.138029 10000 tropical rainforest tropical 1996</span></span>
<span><span class="co"># 5 BSP1   Wrightia    arborea  5.411268 10000 tropical rainforest tropical 1996</span></span>
<span><span class="co"># 6 BSP1      Ixora  brachiata  3.183099 10000 tropical rainforest tropical 1996</span></span>
<span></span>
<span><span class="va">xyTree</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="../reference/sample_file.html">sample_file</a></span><span class="op">(</span><span class="st">"SampleTreeXY.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">xyTree</span><span class="op">)</span></span>
<span><span class="co">#     id        y        x</span></span>
<span><span class="co"># 1 BSP1 14.36806 74.91944</span></span>
<span><span class="co"># 2 BSP1 14.36806 74.91944</span></span>
<span><span class="co"># 3 BSP1 14.36806 74.91944</span></span>
<span><span class="co"># 4 BSP1 14.36806 74.91944</span></span>
<span><span class="co"># 5 BSP1 14.36806 74.91944</span></span>
<span><span class="co"># 6 BSP1 14.36806 74.91944</span></span>
<span></span>
<span><span class="co"># Unformatted data example</span></span>
<span><span class="va">TreeRaw</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="../reference/sample_file.html">sample_file</a></span><span class="op">(</span><span class="st">"KarnatakaForest.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">TreeRaw</span><span class="op">)</span></span>
<span><span class="co">#   plotId     treeId     family       genus        species     d_cm      lat     long size_m2 year</span></span>
<span><span class="co"># 1   BSP1   BSP1_248 Clusiaceae    Garcinia         indica 3.183099 14.36806 74.91944   10000 1998</span></span>
<span><span class="co"># 2   BSP1   BSP1_269  Rubiaceae       Ixora      brachiata 3.183099 14.36806 74.91944   10000 1998</span></span>
<span><span class="co"># 3   BSP1 BSP1_303_B  Rubiaceae       Meyna      laxiflora 3.183099 14.36806 74.91944   10000 1998</span></span>
<span><span class="co"># 4   BSP1    BSP1_29  Lauraceae Alseodaphne semecarpifolia 3.501409 14.36806 74.91944   10000 1998</span></span>
<span><span class="co"># 5   BSP1    BSP1_30  Lauraceae Alseodaphne semecarpifolia 3.501409 14.36806 74.91944   10000 1998</span></span>
<span><span class="co"># 6   BSP1    BSP1_31  Lauraceae Alseodaphne semecarpifolia 3.501409 14.36806 74.91944   10000 1998</span></span>
<span></span>
<span><span class="va">rawTree</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RawPlotsTree.html">RawPlotsTree</a></span><span class="op">(</span><span class="va">TreeRaw</span><span class="op">)</span> <span class="co"># User is be asked to select the requested columns</span></span>
<span></span>
<span><span class="va">plotTree</span> <span class="op">&lt;-</span> <span class="va">rawTree</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plotTree</span><span class="op">)</span></span>
<span><span class="co">#   id       genus        species diameter  size fez gez year</span></span>
<span><span class="co"># 1 11    Garcinia         indica 3.183099 10000  NA  NA 1998</span></span>
<span><span class="co"># 2 11       Ixora      brachiata 3.183099 10000  NA  NA 1998</span></span>
<span><span class="co"># 3 11       Meyna      laxiflora 3.183099 10000  NA  NA 1998</span></span>
<span><span class="co"># 4 11 Alseodaphne semecarpifolia 3.501409 10000  NA  NA 1998</span></span>
<span><span class="co"># 5 11 Alseodaphne semecarpifolia 3.501409 10000  NA  NA 1998</span></span>
<span><span class="co"># 6 11 Alseodaphne semecarpifolia 3.501409 10000  NA  NA 1998</span></span>
<span></span>
<span><span class="va">xyTree</span> <span class="op">&lt;-</span> <span class="va">rawTree</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">xyTree</span><span class="op">)</span></span>
<span><span class="co">#   id        x        y</span></span>
<span><span class="co"># 1 11 74.91944 14.36806</span></span>
<span><span class="co"># 2 11 74.91944 14.36806</span></span>
<span><span class="co"># 3 11 74.91944 14.36806</span></span>
<span><span class="co"># 4 11 74.91944 14.36806</span></span>
<span><span class="co"># 5 11 74.91944 14.36806</span></span>
<span><span class="co"># 6 11 74.91944 14.36806</span></span>
<span></span>
<span><span class="co"># Calculate mean AGB and SD by PLOT_ID using BIOMASS package's height-diameter model</span></span>
<span><span class="va">plots_trees_agb_sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sd_tree.html">sd_tree</a></span><span class="op">(</span><span class="va">plotTree</span>, <span class="va">xyTree</span>, <span class="st">"India"</span><span class="op">)</span></span>
<span><span class="co"># The reference dataset contains 289 wood density values</span></span>
<span><span class="co"># Your taxonomic table contains 122 taxa</span></span>
<span><span class="co"># No tree height data found in original plot data. Calculating height using BIOMASS height-diameter model.</span></span>
<span><span class="co"># Warning message:</span></span>
<span><span class="co"># In BIOMASS::getWoodDensity(genus = plot$genus, species = plot$species,  :</span></span>
<span><span class="co">#   DRYAD data only stored 289 wood density values in your region of interest. You could provide additional wood densities (parameter addWoodDensityData) or widen your region (region="World")</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">plots_trees_agb_sd</span><span class="op">)</span></span>
<span><span class="co">#    PLOT_ID  POINT_X  POINT_Y SIZE_HA AVG_YEAR   AGB_T_HA    sdTree</span></span>
<span><span class="co"># 1        1 74.91944 14.36806       1     1998 185.527727 12.248335</span></span>
<span><span class="co"># 2        2 74.62778 15.16667       1     1998 301.968606 19.298196</span></span>
<span><span class="co"># 3        3 74.63667 14.24944       1     1998 160.733560 17.332449</span></span>
<span><span class="co"># 4        4 74.66806 14.24528       1     1998 351.992736 20.154294</span></span>
<span><span class="co"># 5        5 75.11806 14.28333       1     1998 305.638906 20.040947</span></span>
<span><span class="co"># 6        6 75.13583 14.28389       1     1998 425.775593 38.229345</span></span>
<span><span class="co"># 7        7 74.87222 14.42500       1     1998 234.641786 13.436895</span></span>
<span><span class="co"># 8        8 75.30806 14.44583       1     1998   5.398583  1.654017</span></span>
<span><span class="co"># 9        9 75.17222 14.34861       1     1998  81.813532  9.714730</span></span>
<span><span class="co"># 10      10 75.28639 14.08750       1     1998  73.081759  6.591937</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plot-data-contains-tree-level-measurements-and-nested-plots-sub-plots">Plot data contains tree-level measurements and nested plots
(sub-plots)<a class="anchor" aria-label="anchor" href="#plot-data-contains-tree-level-measurements-and-nested-plots-sub-plots"></a>
</h3>
<p>This format of plot data is similar to the previous one but contains
nested plot (sub-plots) data. Let’s exemplify it by using the following
sample shapefile:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">cent</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="../reference/sample_file.html">sample_file</a></span><span class="op">(</span><span class="st">"SampleCentroid.shp"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Sub-plot centroids</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cent</span><span class="op">)</span></span>
<span><span class="co"># Simple feature collection with 5 features and 23 fields</span></span>
<span><span class="co"># Geometry type: POINT</span></span>
<span><span class="co"># Dimension:     XY</span></span>
<span><span class="co"># Bounding box:  xmin: 272004.1 ymin: 350052.3 xmax: 272092.6 ymax: 350087.1</span></span>
<span><span class="co"># Projected CRS: OSGB36 / British National Grid</span></span>
<span><span class="co">#                               POINT_GUID     GRID_REF POINT_NUMB VISIT_STAT REASON_FOR PEG_LEFT</span></span>
<span><span class="co"># 1 {89B25687-EDA0-4704-B00D-93EDDA162779} sh7202950089          1          3          1        1</span></span>
<span><span class="co"># 2 {22E69595-D9BE-4BB1-8660-E2E7457E2068} sh7201850062          1          3          1        1</span></span>
<span><span class="co"># 3 {B4980FC2-4DA9-4897-93E2-07D03233D2F4} sh7209250061          1          3          1        1</span></span>
<span><span class="co"># 4 {224FD85B-6B64-4075-B51F-BA2D390AB4EF} sh7208750054          1          3          1        1</span></span>
<span><span class="co"># 5 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} sh7200750088          1          3          1        1</span></span>
<span><span class="co">#   PEG_NOT_LE                                  PEG_DESCRI                              PLOT_GUID OBJECTID</span></span>
<span><span class="co"># 1          0                   NW of v. slight open area {ABC3BE55-35CC-430B-A9C2-5BA9437286B6}        1</span></span>
<span><span class="co"># 2          0                   5m N of edge of mossy gap {E76DFF7B-39B4-45A5-85B8-F7BC38A429D5}        2</span></span>
<span><span class="co"># 3          0      W of large SS in shallow plough furrow {6EFDF9E3-F49D-4ED1-8BEB-F53D2A896BBA}        3</span></span>
<span><span class="co"># 4          0 in plough ditch with slight gap in row to E {47011DCB-7ADF-4C3D-B621-74AA98265CA4}        4</span></span>
<span><span class="co"># 5          0                      N from small mossy gap {EE0EF576-D6FF-4603-864F-23DC93C6A74D}        5</span></span>
<span><span class="co">#   INACCESSIB ACCESS_STA GENERATE_N HEIGHT TREE_COUNT ESTIMATED_ TREE_COU_1 RECORD_STA FIELDS_STA</span></span>
<span><span class="co"># 1          0          1          0      0          0          0          0        new       &lt;NA&gt;</span></span>
<span><span class="co"># 2          0          1          0      0          0          0          0        new       &lt;NA&gt;</span></span>
<span><span class="co"># 3          0          1          0      0          0          0          0        new       &lt;NA&gt;</span></span>
<span><span class="co"># 4          0          1          0      0          0          0          0        new       &lt;NA&gt;</span></span>
<span><span class="co"># 5          0          1          0      0          0          0          0        new       &lt;NA&gt;</span></span>
<span><span class="co">#   RESURVEY_P FROZEN POINT_STUM ACCESS_COM                  geometry</span></span>
<span><span class="co"># 1          0      0         21       &lt;NA&gt; POINT (272028.2 350085.6)</span></span>
<span><span class="co"># 2          0      0         49       &lt;NA&gt; POINT (272013.6 350060.7)</span></span>
<span><span class="co"># 3          0      0          8       &lt;NA&gt; POINT (272092.6 350063.9)</span></span>
<span><span class="co"># 4          0      0         10       &lt;NA&gt;   POINT (272086 350052.3)</span></span>
<span><span class="co"># 5          0      0         22       &lt;NA&gt; POINT (272004.1 350087.1)</span></span>
<span></span>
<span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="../reference/sample_file.html">sample_file</a></span><span class="op">(</span><span class="st">"SampleTreeNested.csv"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Tree data per sub-plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">tree</span><span class="op">)</span></span>
<span><span class="co"># 'data.frame': 153 obs. of  50 variables:</span></span>
<span><span class="co">#  $ TREE_GUID..              : chr  "{90106646-EC43-4E04-B3DB-F4DBE0F37FD3}" "{3B18375F-B224-420E-92D0-0D7A0AC51B4A}" "{BCADC7ED-3C2B-41E1-9118-D3A74AAE8353}" "{DE39854B-074C-4CAE-B32C-42AC66063D68}" ...</span></span>
<span><span class="co">#  $ TREE_TYPE                : chr  "1" "1" "1" "1" ...</span></span>
<span><span class="co">#  $ SPIS                     : chr  "SS" "SS" "SS" "SS" ...</span></span>
<span><span class="co">#  $ STRY                     : chr  "4" "4" "4" "4" ...</span></span>
<span><span class="co">#  $ TREE_ALIVE               : chr  "1" "1" "1" "1" ...</span></span>
<span><span class="co">#  $ DEAD_TREE_CAUSE          : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ GROUP_TYPE               : chr  "1" "1" "1" "1" ...</span></span>
<span><span class="co">#  $ CONIFER_STEM_STRAIGHTNESS: chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ LOWEST_DEAD_BRANCH_HEIGHT: chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ POINT_GUID..             : chr  "{197A519B-7AF1-4374-BDD8-81FA03CCC54F}" "{197A519B-7AF1-4374-BDD8-81FA03CCC54F}" "{197A519B-7AF1-4374-BDD8-81FA03CCC54F}" "{197A519B-7AF1-4374-BDD8-81FA03CCC54F}" ...</span></span>
<span><span class="co">#  $ TREE_OR_STUMP            : int  1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#  $ DECAY_CLASS              : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ STUMP_DECAY_CLASS        : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ COPPICE_STOOL            : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ LINKED_TREE_GUID..       : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ TREE_LOCATION            : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ OBJECTID..               : int  34 24 25 26 27 28 29 30 31 23 ...</span></span>
<span><span class="co">#  $ OUTSIDE_PLOT             : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ HEIGHT                   : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ TREE_HEIGHT              : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ UC_HEIGHT                : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ LC_HEIGHT                : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ SHAPE..                  : chr  "Point" "Point" "Point" "Point" ...</span></span>
<span><span class="co">#  $ DBH                      : chr  "11" "11" "10" "12" ...</span></span>
<span><span class="co">#  $ DIAMETER_ONE             : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ DIAMETER_TWO             : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ SPECIES_GROUP            : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ EXCESSIVE_LEAN           : chr  "0" "0" "0" "0" ...</span></span>
<span><span class="co">#  $ WINDSNAPPED              : chr  "0" "0" "0" "0" ...</span></span>
<span><span class="co">#  $ COPPICE_STOOL_GUID..     : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ CROWN_DIAMETER_ONE       : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ CROWN_DIAMETER_TWO       : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ RECORD_STATUS            : chr  "new" "new" "new" "new" ...</span></span>
<span><span class="co">#  $ FIELDS_STATUS            : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ TIMBER_HEIGHT            : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ TREE_RESURVEY            : int  1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#  $ GOOD_FELLING_PRACTICE    : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ COPPICE_STOOL_DIAMETER   : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ RANGE_DBH                : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ RANGE_HEIGHT             : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ RANGE_CROWN_DIAMETER_1   : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ RANGE_CROWN_DIAMETER_2   : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ RANGE_DIAMETER_ONE       : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ RANGE_STUMP_HEIGHT       : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ STUMP_TYPE               : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ RANGE_DIAMETER_TWO       : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ SIZE_RANK                : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ PERCENTAGE_HEIGHT_REM    : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ STUMP_AGE                : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span><span class="co">#  $ IS_STUMP_AGE             : chr  "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" "&lt;Null&gt;" ...</span></span>
<span></span>
<span><span class="va">TreeData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Nested.html">Nested</a></span><span class="op">(</span><span class="va">cent</span>, <span class="va">tree</span><span class="op">)</span></span>
<span><span class="co"># which column is your unique Plot ID? </span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  1: TREE_GUID..                 2: TREE_TYPE                   3: SPIS                     </span></span>
<span><span class="co">#  4: STRY                        5: TREE_ALIVE                  6: DEAD_TREE_CAUSE          </span></span>
<span><span class="co">#  7: GROUP_TYPE                  8: CONIFER_STEM_STRAIGHTNESS   9: LOWEST_DEAD_BRANCH_HEIGHT</span></span>
<span><span class="co"># 10: POINT_GUID..               11: TREE_OR_STUMP              12: DECAY_CLASS              </span></span>
<span><span class="co"># 13: STUMP_DECAY_CLASS          14: COPPICE_STOOL              15: LINKED_TREE_GUID..       </span></span>
<span><span class="co"># 16: TREE_LOCATION              17: OBJECTID..                 18: OUTSIDE_PLOT             </span></span>
<span><span class="co"># 19: HEIGHT                     20: TREE_HEIGHT                21: UC_HEIGHT                </span></span>
<span><span class="co"># 22: LC_HEIGHT                  23: SHAPE..                    24: DBH                      </span></span>
<span><span class="co"># 25: DIAMETER_ONE               26: DIAMETER_TWO               27: SPECIES_GROUP            </span></span>
<span><span class="co"># 28: EXCESSIVE_LEAN             29: WINDSNAPPED                30: COPPICE_STOOL_GUID..     </span></span>
<span><span class="co"># 31: CROWN_DIAMETER_ONE         32: CROWN_DIAMETER_TWO         33: RECORD_STATUS            </span></span>
<span><span class="co"># 34: FIELDS_STATUS              35: TIMBER_HEIGHT              36: TREE_RESURVEY            </span></span>
<span><span class="co"># 37: GOOD_FELLING_PRACTICE      38: COPPICE_STOOL_DIAMETER     39: RANGE_DBH                </span></span>
<span><span class="co"># 40: RANGE_HEIGHT               41: RANGE_CROWN_DIAMETER_1     42: RANGE_CROWN_DIAMETER_2   </span></span>
<span><span class="co"># 43: RANGE_DIAMETER_ONE         44: RANGE_STUMP_HEIGHT         45: STUMP_TYPE               </span></span>
<span><span class="co"># 46: RANGE_DIAMETER_TWO         47: SIZE_RANK                  48: PERCENTAGE_HEIGHT_REM    </span></span>
<span><span class="co"># 49: STUMP_AGE                  50: IS_STUMP_AGE               </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 10</span></span>
<span><span class="co"># which column is your unique  DBH (cm)? </span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  1: TREE_GUID..                 2: TREE_TYPE                   3: SPIS                     </span></span>
<span><span class="co">#  4: STRY                        5: TREE_ALIVE                  6: DEAD_TREE_CAUSE          </span></span>
<span><span class="co">#  7: GROUP_TYPE                  8: CONIFER_STEM_STRAIGHTNESS   9: LOWEST_DEAD_BRANCH_HEIGHT</span></span>
<span><span class="co"># 10: POINT_GUID..               11: TREE_OR_STUMP   plots &lt;- MeasurementErr(plotTree, xyTree, 'Europe')           12: DECAY_CLASS              </span></span>
<span><span class="co"># 13: STUMP_DECAY_CLASS          14: COPPICE_STOOL              15: LINKED_TREE_GUID..       </span></span>
<span><span class="co"># 16: TREE_LOCATION              17: OBJECTID..                 18: OUTSIDE_PLOT             </span></span>
<span><span class="co"># 19: HEIGHT                     20: TREE_HEIGHT                21: UC_HEIGHT                </span></span>
<span><span class="co"># 22: LC_HEIGHT                  23: SHAPE..                    24: DBH                      </span></span>
<span><span class="co"># 25: DIAMETER_ONE               26: DIAMETER_TWO               27: SPECIES_GROUP            </span></span>
<span><span class="co"># 28: EXCESSIVE_LEAN             29: WINDSNAPPED                30: COPPICE_STOOL_GUID..     </span></span>
<span><span class="co"># 31: CROWN_DIAMETER_ONE         32: CROWN_DIAMETER_TWO         33: RECORD_STATUS            </span></span>
<span><span class="co"># 34: FIELDS_STATUS              35: TIMBER_HEIGHT              36: TREE_RESURVEY            </span></span>
<span><span class="co"># 37: GOOD_FELLING_PRACTICE      38: COPPICE_STOOL_DIAMETER     39: RANGE_DBH                </span></span>
<span><span class="co"># 40: RANGE_HEIGHT               41: RANGE_CROWN_DIAMETER_1     42: RANGE_CROWN_DIAMETER_2   </span></span>
<span><span class="co"># 43: RANGE_DIAMETER_ONE         44: RANGE_STUMP_HEIGHT         45: STUMP_TYPE               </span></span>
<span><span class="co"># 46: RANGE_DIAMETER_TWO         47: SIZE_RANK                  48: PERCENTAGE_HEIGHT_REM    </span></span>
<span><span class="co"># 49: STUMP_AGE                  50: IS_STUMP_AGE               </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 24</span></span>
<span><span class="co"># which column is your unique Tree Height (m)? </span></span>
<span><span class="co"># </span></span>
<span><span class="co">#  1: TREE_GUID..                 2: TREE_TYPE                   3: SPIS                     </span></span>
<span><span class="co">#  4: STRY                        5: TREE_ALIVE                  6: DEAD_TREE_CAUSE          </span></span>
<span><span class="co">#  7: GROUP_TYPE                  8: CONIFER_STEM_STRAIGHTNESS   9: LOWEST_DEAD_BRANCH_HEIGHT</span></span>
<span><span class="co"># 10: POINT_GUID..               11: TREE_OR_STUMP              12: DECAY_CLASS              </span></span>
<span><span class="co"># 13: STUMP_DECAY_CLASS          14: COPPICE_STOOL              15: LINKED_TREE_GUID..       </span></span>
<span><span class="co"># 16: TREE_LOCATION              17: OBJECTID..                 18: OUTSIDE_PLOT             </span></span>
<span><span class="co"># 19: HEIGHT                     20: TREE_HEIGHT                21: UC_HEIGHT                </span></span>
<span><span class="co"># 22: LC_HEIGHT                  23: SHAPE..                    24: DBH                      </span></span>
<span><span class="co"># 25: DIAMETER_ONE               26: DIAMETER_TWO               27: SPECIES_GROUP            </span></span>
<span><span class="co"># 28: EXCESSIVE_LEAN             29: WINDSNAPPED                30: COPPICE_STOOL_GUID..     </span></span>
<span><span class="co"># 31: CROWN_DIAMETER_ONE         32: CROWN_DIAMETER_TWO         33: RECORD_STATUS            </span></span>
<span><span class="co"># 34: FIELDS_STATUS              35: TIMBER_HEIGHT              36: TREE_RESURVEY            </span></span>
<span><span class="co"># 37: GOOD_FELLING_PRACTICE      38: COPPICE_STOOL_DIAMETER     39: RANGE_DBH                </span></span>
<span><span class="co"># 40: RANGE_HEIGHT               41: RANGE_CROWN_DIAMETER_1     42: RANGE_CROWN_DIAMETER_2   </span></span>
<span><span class="co"># 43: RANGE_DIAMETER_ONE         44: RANGE_STUMP_HEIGHT         45: STUMP_TYPE               </span></span>
<span><span class="co"># 46: RANGE_DIAMETER_TWO         47: SIZE_RANK                  48: PERCENTAGE_HEIGHT_REM    </span></span>
<span><span class="co"># 49: STUMP_AGE                  50: IS_STUMP_AGE               </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 20</span></span>
<span><span class="co"># Warning: NAs introduced by coercion</span></span>
<span><span class="co"># Enter tree genus: Picea</span></span>
<span><span class="co"># Enter tree species: sitchensis</span></span>
<span><span class="co"># Enter plot size in m2: 100</span></span>
<span></span>
<span><span class="va">plotTree</span> <span class="op">&lt;-</span> <span class="va">TreeData</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plotTree</span><span class="op">)</span></span>
<span><span class="co">#                                       id genus    species diameter size fez gez year   height</span></span>
<span><span class="co"># 1 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} Picea sitchensis       11  100  NA  NA 2010 11.96667</span></span>
<span><span class="co"># 2 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} Picea sitchensis       11  100  NA  NA 2010 11.96667</span></span>
<span><span class="co"># 3 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} Picea sitchensis       10  100  NA  NA 2010 11.96667</span></span>
<span><span class="co"># 4 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} Picea sitchensis       12  100  NA  NA 2010 11.96667</span></span>
<span><span class="co"># 5 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} Picea sitchensis       10  100  NA  NA 2010 11.96667</span></span>
<span><span class="co"># 6 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} Picea sitchensis       13  100  NA  NA 2010 11.96667</span></span>
<span></span>
<span><span class="va">xyTree</span> <span class="op">&lt;-</span> <span class="va">TreeData</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">xyTree</span><span class="op">)</span></span>
<span><span class="co">#                                       id       y         x</span></span>
<span><span class="co"># 1 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} 53.0327 -3.910179</span></span>
<span><span class="co"># 2 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} 53.0327 -3.910179</span></span>
<span><span class="co"># 3 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} 53.0327 -3.910179</span></span>
<span><span class="co"># 4 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} 53.0327 -3.910179</span></span>
<span><span class="co"># 5 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} 53.0327 -3.910179</span></span>
<span><span class="co"># 6 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} 53.0327 -3.910179</span></span>
<span></span>
<span><span class="va">plots_trees_nested_agb_sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sd_tree.html">sd_tree</a></span><span class="op">(</span><span class="va">plotTree</span>, <span class="va">xyTree</span>, <span class="st">'Europe'</span><span class="op">)</span></span>
<span><span class="co"># The reference dataset contains 77 wood density values</span></span>
<span><span class="co"># Your taxonomic table contains 1 taxa</span></span>
<span><span class="co"># Using actual tree height from the provided plot data.</span></span>
<span><span class="co"># Warning message:</span></span>
<span><span class="co"># In BIOMASS::getWoodDensity(genus = plot$genus, species = plot$species,  :</span></span>
<span><span class="co">#   DRYAD data only stored 77 wood density values in your region of interest. You could provide additional wood densities (parameter addWoodDensityData) or widen your region (region="World")</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">plots_trees_nested_agb_sd</span><span class="op">)</span></span>
<span><span class="co">#                                  PLOT_ID   POINT_X  POINT_Y SIZE_HA AVG_YEAR AGB_T_HA   sdTree</span></span>
<span><span class="co"># 1 {197A519B-7AF1-4374-BDD8-81FA03CCC54F} -3.910179 53.03270    0.01     2010 191.1393 27.52151</span></span>
<span><span class="co"># 2 {224FD85B-6B64-4075-B51F-BA2D390AB4EF} -3.908944 53.03241    0.01     2010 243.5213 68.40316</span></span>
<span><span class="co"># 3 {22E69595-D9BE-4BB1-8660-E2E7457E2068} -3.910026 53.03247    0.01     2010 302.0629 42.43342</span></span>
<span><span class="co"># 4 {89B25687-EDA0-4704-B00D-93EDDA162779} -3.909820 53.03270    0.01     2010 287.5870 47.53895</span></span>
<span><span class="co"># 5 {B4980FC2-4DA9-4897-93E2-07D03233D2F4} -3.908851 53.03252    0.01     2010 427.2943 90.30131</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="lidar-reference-data">Lidar reference data<a class="anchor" aria-label="anchor" href="#lidar-reference-data"></a>
</h3>
<p>Let’s see an example where lidar data is used as plot data reference.
In the example below we use sample lidar data provided with the
package:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Sample lidar data folder location:</span></span>
<span><span class="va">slb.agb.dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_lidar_folder.html">sample_lidar_folder</a></span><span class="op">(</span><span class="st">"SustainableLandscapeBrazil_v04/SLB_AGBmaps"</span><span class="op">)</span></span>
<span><span class="va">slb.cv.dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_lidar_folder.html">sample_lidar_folder</a></span><span class="op">(</span><span class="st">"SustainableLandscapeBrazil_v04/SLB_CVmaps"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Obtaining the Coeficient of Variation for each cell in the dataset:</span></span>
<span><span class="va">slb.cv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RefLidar.html">RefLidar</a></span><span class="op">(</span><span class="va">slb.cv.dir</span><span class="op">)</span></span>
<span><span class="co"># Enter raster type (AGB, CV, or SD): cv</span></span>
<span><span class="co"># User input needed to extract PLOT_ID from filename(s)...</span></span>
<span><span class="co"># File(s) used to extract data: BON_A01_2018_CV_100m.tif</span></span>
<span><span class="co"># Enter numeric index of the first letter of PLOT_ID: 1</span></span>
<span><span class="co"># Enter numeric index of the last letter of PLOT_ID: 7</span></span>
<span><span class="co"># User input needed to extract YEAR from filename(s)...</span></span>
<span><span class="co"># File(s) used to extract data: BON_A01_2018_CV_100m.tif</span></span>
<span><span class="co"># Enter numeric index of the first letter of YEAR: 9</span></span>
<span><span class="co"># Enter numeric index of the last letter of YEAR: 12</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">slb.cv</span><span class="op">)</span></span>
<span><span class="co">#      PLOT_ID   POINT_X   POINT_Y        CV AVG_YEAR</span></span>
<span><span class="co"># 1135 BON_A01 -67.28973 -9.889289 0.3526200     2018</span></span>
<span><span class="co"># 1136 BON_A01 -67.28882 -9.889289 0.3432670     2018</span></span>
<span><span class="co"># 1137 BON_A01 -67.28791 -9.889289 0.3390796     2018</span></span>
<span><span class="co"># 1138 BON_A01 -67.28700 -9.889289 0.3368152     2018</span></span>
<span><span class="co"># 1170 BON_A01 -67.28882 -9.890197 0.3561200     2018</span></span>
<span><span class="co"># 1171 BON_A01 -67.28791 -9.890197 0.3443113     2018</span></span>
<span></span>
<span><span class="co"># Obtaining the Above Ground Biomass for each cell in the dataset:</span></span>
<span><span class="va">plots_lidar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RefLidar.html">RefLidar</a></span><span class="op">(</span><span class="va">slb.agb.dir</span><span class="op">)</span></span>
<span><span class="co"># Enter raster type (AGB, CV, or SD): agb</span></span>
<span><span class="co"># User input needed to extract PLOT_ID from filename(s)...</span></span>
<span><span class="co"># File(s) used to extract data: BON_A01_2018_AGB_100m.tif</span></span>
<span><span class="co"># Enter numeric index of the first letter of PLOT_ID: 1</span></span>
<span><span class="co"># Enter numeric index of the last letter of PLOT_ID: 7</span></span>
<span><span class="co"># User input needed to extract YEAR from filename(s)...</span></span>
<span><span class="co"># File(s) used to extract data: BON_A01_2018_AGB_100m.tif</span></span>
<span><span class="co"># Enter numeric index of the first letter of YEAR: 9</span></span>
<span><span class="co"># Enter numeric index of the last letter of YEAR: 12</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">plots_lidar</span><span class="op">)</span></span>
<span><span class="co">#      PLOT_ID   POINT_X   POINT_Y      AGB AVG_YEAR</span></span>
<span><span class="co"># 1135 BON_A01 -67.28973 -9.889289 214.9921     2018</span></span>
<span><span class="co"># 1136 BON_A01 -67.28882 -9.889289 227.4593     2018</span></span>
<span><span class="co"># 1137 BON_A01 -67.28791 -9.889289 233.1332     2018</span></span>
<span><span class="co"># 1138 BON_A01 -67.28700 -9.889289 236.3842     2018</span></span>
<span><span class="co"># 1170 BON_A01 -67.28882 -9.890197 210.6665     2018</span></span>
<span><span class="co"># 1171 BON_A01 -67.28791 -9.890197 226.1070     2018</span></span>
<span></span>
<span><span class="co"># Calculating the Standard Deviation (SD = CV * AGB) and adding it to the final plot data:</span></span>
<span><span class="va">plots_lidar</span><span class="op">$</span><span class="va">sdTree</span> <span class="op">&lt;-</span> <span class="va">slb.cv</span><span class="op">$</span><span class="va">CV</span> <span class="op">*</span> <span class="va">plots_lidar</span><span class="op">$</span><span class="va">AGB</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">plots_lidar</span><span class="op">)</span></span>
<span><span class="co">#      PLOT_ID   POINT_X   POINT_Y      AGB AVG_YEAR   sdTree</span></span>
<span><span class="co"># 1135 BON_A01 -67.28973 -9.889289 214.9921     2018 75.81052</span></span>
<span><span class="co"># 1136 BON_A01 -67.28882 -9.889289 227.4593     2018 78.07928</span></span>
<span><span class="co"># 1137 BON_A01 -67.28791 -9.889289 233.1332     2018 79.05070</span></span>
<span><span class="co"># 1138 BON_A01 -67.28700 -9.889289 236.3842     2018 79.61778</span></span>
<span><span class="co"># 1170 BON_A01 -67.28882 -9.890197 210.6665     2018 75.02255</span></span>
<span><span class="co"># 1171 BON_A01 -67.28791 -9.890197 226.1070     2018 77.85120</span></span>
<span></span>
<span><span class="co"># Add biome information</span></span>
<span><span class="va">plots_lidar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/BiomePair.html">BiomePair</a></span><span class="op">(</span><span class="va">plots_lidar</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add SIZE_HA column (required for calculateTotalUncertainty)</span></span>
<span><span class="va">plots_lidar</span><span class="op">$</span><span class="va">SIZE_HA</span> <span class="op">&lt;-</span> <span class="fl">1</span>  <span class="co"># For 100m resolution (100m x 100m = 1 ha)</span></span>
<span></span>
<span><span class="co"># Rename AGB column to AGB_T_HA to match what calculateTotalUncertainty expects</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">plots_lidar</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">plots_lidar</span><span class="op">)</span> <span class="op">==</span> <span class="st">"AGB"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"AGB_T_HA"</span></span>
<span></span>
<span><span class="co"># Calculate total uncertainty (measurement, sampling, and growth)</span></span>
<span><span class="va">plots_lidar_unc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculateTotalUncertainty.html">calculateTotalUncertainty</a></span><span class="op">(</span><span class="va">plots_lidar</span>, map_year <span class="op">=</span> <span class="fl">2018</span>, map_resolution <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co"># Using existing sdTree values for tree_level data</span></span>
<span><span class="co"># Calculating sampling uncertainty using Rejou-Mechain approach</span></span>
<span><span class="co"># Loading sampling error data from package file</span></span>
<span><span class="co"># Calculating growth uncertainty by biome</span></span>
<span><span class="co"># Total uncertainty calculated for plot data of type: tree_level</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plots_lidar_unc</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#     PLOT_ID AGB_T_HA AVG_YEAR   sdTree      ZONE         FAO.ecozone      GEZ SIZE_HA   POINT_X   POINT_Y</span></span>
<span><span class="co"># 1 BON_A01 210.6665     2018 75.02255 S.America Tropical rainforest Tropical       1 -67.28882 -9.890197</span></span>
<span><span class="co"># 2 BON_A01 226.1070     2018 77.85120 S.America Tropical rainforest Tropical       1 -67.28791 -9.890197</span></span>
<span><span class="co"># 3 BON_A01 227.4593     2018 78.07928 S.America Tropical rainforest Tropical       1 -67.28882 -9.889289</span></span>
<span><span class="co"># 4 BON_A01 233.1332     2018 79.05070 S.America Tropical rainforest Tropical       1 -67.28791 -9.889289</span></span>
<span><span class="co"># 5 BON_A01 214.9921     2018 75.81052 S.America Tropical rainforest Tropical       1 -67.28973 -9.889289</span></span>
<span><span class="co"># 6 BON_A01 195.5950     2018 72.22207 S.America Tropical rainforest Tropical       1 -67.29064 -9.888382</span></span>
<span><span class="co">#   RS_HA ratio     sdSE sdGrowth  varPlot  sdTotal</span></span>
<span><span class="co"># 1     1     1 16.34357        0 5895.496 76.78213</span></span>
<span><span class="co"># 2     1     1 16.34357        0 6327.922 79.54824</span></span>
<span><span class="co"># 3     1     1 16.34357        0 6363.486 79.77146</span></span>
<span><span class="co"># 4     1     1 16.34357        0 6516.126 80.72252</span></span>
<span><span class="co"># 5     1     1 16.34357        0 6014.347 77.55222</span></span>
<span><span class="co"># 6     1     1 16.34357        0 5483.140 74.04823</span></span>
<span></span>
<span><span class="co"># See the relative contribution of different uncertainty components</span></span>
<span><span class="va">plots_lidar_unc</span><span class="op">$</span><span class="va">uncertainty_components</span></span>
<span><span class="co"># measurement    sampling      growth </span></span>
<span><span class="co">#  0.91475934  0.08524066  0.00000000 </span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plot-data-is-a-gis-file">Plot data is a GIS file<a class="anchor" aria-label="anchor" href="#plot-data-is-a-gis-file"></a>
</h3>
<p>Let’s see an example where the plot data is a GIS file. Users should
know plot ID, plot size, inventory year beforehand for manual entry if
ever missing in the GIS files’ attributes. In the example below we use a
sample shapefile provided with the package:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">plots_sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="../reference/sample_file.html">sample_file</a></span><span class="op">(</span><span class="st">"samp_shp.shp"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">plots_sf</span><span class="op">)</span></span>
<span><span class="co"># Simple feature collection with 170 features and 3 fields</span></span>
<span><span class="co"># Geometry type: POINT</span></span>
<span><span class="co"># Dimension:     XY</span></span>
<span><span class="co"># Bounding box:  xmin: 137.3756 ymin: 35.16216 xmax: 137.4079 ymax: 35.19799</span></span>
<span><span class="co"># Geodetic CRS:  WGS 84</span></span>
<span><span class="co"># First 10 features:</span></span>
<span><span class="co">#    MEAN_Heigh        V       AGB                  geometry</span></span>
<span><span class="co"># 1    20.99811 263.2125 127.70163 POINT (137.3777 35.16275)</span></span>
<span><span class="co"># 2    20.92308 330.6375 177.22711 POINT (137.3774 35.16304)</span></span>
<span><span class="co"># 3    18.03867 223.0688 123.08946  POINT (137.381 35.16245)</span></span>
<span><span class="co"># 4    17.39841 172.4500  95.24402 POINT (137.3799 35.16216)</span></span>
<span><span class="co"># 5    20.43833 249.2562 138.22925 POINT (137.3806 35.16245)</span></span>
<span><span class="co"># 6    20.04576 235.3688 130.56611 POINT (137.3806 35.16363)</span></span>
<span><span class="co"># 7    20.01860 266.9125 143.88520  POINT (137.377 35.16275)</span></span>
<span><span class="co"># 8    21.07500 273.0625 151.47596 POINT (137.3803 35.16363)</span></span>
<span><span class="co"># 9    19.81884 270.2000 148.59707 POINT (137.3785 35.16363)</span></span>
<span><span class="co"># 10   22.15147 333.8500 182.89619 POINT (137.3788 35.16392)</span></span></code></pre></div>
<p>The sample shapefile’s SRS / CRS is already in EPSG:4326 / WGS84 so
there is no need to transform it. In case it isn’t we would precede the
following step with
<code>plots_sf &lt;- st_transform(plots_sf, crs = 4326)</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">plots_sf</span><span class="op">$</span><span class="va">longitude</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">plots_sf</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">plots_sf</span><span class="op">$</span><span class="va">latitude</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">plots_sf</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span></span>
<span></span>
<span><span class="va">shapefile_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RawPlots.html">RawPlots</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">plots_sf</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co"># Which column is your unique Plot ID? </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># 1: Manual entry</span></span>
<span><span class="co"># 2: MEAN_Heigh</span></span>
<span><span class="co"># 3: V</span></span>
<span><span class="co"># 4: AGB</span></span>
<span><span class="co"># 5: geometry</span></span>
<span><span class="co"># 6: longitude</span></span>
<span><span class="co"># 7: latitude</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 1</span></span>
<span><span class="co"># Enter the numeric value for manual entry: 1</span></span>
<span><span class="co"># Which column is your plot AGB? </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># 1: Manual entry</span></span>
<span><span class="co"># 2: MEAN_Heigh</span></span>
<span><span class="co"># 3: V</span></span>
<span><span class="co"># 4: AGB</span></span>
<span><span class="co"># 5: geometry</span></span>
<span><span class="co"># 6: longitude</span></span>
<span><span class="co"># 7: latitude</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 4</span></span>
<span><span class="co"># Select longitude column </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># 1: Manual entry</span></span>
<span><span class="co"># 2: MEAN_Heigh</span></span>
<span><span class="co"># 3: V</span></span>
<span><span class="co"># 4: AGB</span></span>
<span><span class="co"># 5: geometry</span></span>
<span><span class="co"># 6: longitude</span></span>
<span><span class="co"># 7: latitude</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 6</span></span>
<span><span class="co"># Which column is your latitude? </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># 1: Manual entry</span></span>
<span><span class="co"># 2: MEAN_Heigh</span></span>
<span><span class="co"># 3: V</span></span>
<span><span class="co"># 4: AGB</span></span>
<span><span class="co"># 5: geometry</span></span>
<span><span class="co"># 6: longitude</span></span>
<span><span class="co"># 7: latitude</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 7</span></span>
<span><span class="co"># Select plot size column </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># 1: Manual entry</span></span>
<span><span class="co"># 2: MEAN_Heigh</span></span>
<span><span class="co"># 3: V</span></span>
<span><span class="co"># 4: AGB</span></span>
<span><span class="co"># 5: geometry</span></span>
<span><span class="co"># 6: longitude</span></span>
<span><span class="co"># 7: latitude</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 1</span></span>
<span><span class="co"># Enter the numeric value for manual entry: 100</span></span>
<span><span class="co"># Select year column </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># 1: Manual entry</span></span>
<span><span class="co"># 2: MEAN_Heigh</span></span>
<span><span class="co"># 3: V</span></span>
<span><span class="co"># 4: AGB</span></span>
<span><span class="co"># 5: geometry</span></span>
<span><span class="co"># 6: longitude</span></span>
<span><span class="co"># 7: latitude</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Selection: 1</span></span>
<span><span class="co"># Enter the numeric value for manual entry: 2022</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">shapefile_plots</span><span class="op">)</span></span>
<span><span class="co">#   PLOT_ID  POINT_X  POINT_Y  AGB_T_HA SIZE_HA FEZ GEZ AVG_YEAR</span></span>
<span><span class="co"># 1       1 137.3777 35.16275 127.70163    0.01  NA  NA     2022</span></span>
<span><span class="co"># 2       1 137.3774 35.16304 177.22711    0.01  NA  NA     2022</span></span>
<span><span class="co"># 3       1 137.3810 35.16245 123.08946    0.01  NA  NA     2022</span></span>
<span><span class="co"># 4       1 137.3799 35.16216  95.24402    0.01  NA  NA     2022</span></span>
<span><span class="co"># 5       1 137.3806 35.16245 138.22925    0.01  NA  NA     2022</span></span>
<span><span class="co"># 6       1 137.3806 35.16363 130.56611    0.01  NA  NA     2022</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/arnanaraza" class="external-link">Arnan Araza</a>, <a href="https://github.com/aTnT" class="external-link">André Tavares</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
